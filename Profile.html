<!DOCTYPE html>

<link rel="stylesheet" href="index.css">
<link rel="stylesheet" href="profile.css">
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script type="module" src="main.js"></script>

<body>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <meta name="referrer" content="no-referrer">
    <form action="mainpage.html">
    <button class="backbutton">Back</button>
</form>
    <center><h3>profile page</h3></center>
    <center><div class="profilediv">
    <section class="profile">
    <h5>current profile picture</h5>
    <img id="profilepicture" class="profileimage" src="images/profile.png">
    
<section class="profilebtndiv">
    <input type="file" id="imageinput" class="upload-input" accept="image/*"/>
    <label tabindex="1" for="imageinput" class="upload-button">   Change  </label>

</section>

<section class="username" tabindex="3">
    <h4 style="margin-top: 20%;"> Change username</h4>
    <input type="text" class="textinput" placeholder="Username">
    <button style="margin-top: 5%;">Change</button>

</section>

<section class="deletediv">
    <button class="deletebtn">Delete account</button>
</section>

</section></center>


</div>
</body>



<script type="module">
    
    function getCookie(name) {
  // Split all cookies into an array
  var cookies = document.cookie.split(';');

  // Loop through the cookies
  for (var i = 0; i < cookies.length; i++) {
    var cookie = cookies[i];

    // Trim leading and trailing spaces
    cookie = cookie.trim();

    // Check if the cookie starts with the name we're looking for
    if (cookie.indexOf(name + '=') === 0) {
      // Extract and return the cookie value
      return cookie.substring(name.length + 1, cookie.length);
    }
  }
}

  var file;

    const firebaseConfig = {
    apiKey: "AIzaSyDuU0009XmoSpkn1ehmfLzqtKKNQ9NOsys",
    authDomain: "login-system-259fd.firebaseapp.com",
    projectId: "login-system-259fd",
    storageBucket: "login-system-259fd.appspot.com",
    messagingSenderId: "723301353539",
    appId: "1:723301353539:web:41754ed85876c50d9a2cf6",
    measurementId: "G-F09GE2SHLZ"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

// Get a reference to the Firebase database

var database = firebase.database();
var profilepic = document.getElementById("profilepicture");
var username = getCookie("username");


var dataRef = database.ref('users/') + username;

dataRef.once("value", function(snapshot) {
  profilepic.src = snapshot.profilepic;
});




</script>

